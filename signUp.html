<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up - LinoxFitness</title>
  <link rel="stylesheet" href="HomePage.css" />
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-brand">
        <h1><a href="home.html" style="color: white; text-decoration: none;">LinoxFitness</a></h1>
      </div>
      <ul class="nav-menu">
        <li><a href="about.html">About</a></li>
        <li><a href="schedule.html">Workout Schedule</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="credentials.html">Credentials</a></li>
        <li><a href="loginPage.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero" style="min-height: 60vh;">
      <div class="hero-content">
        <h1>Join LinoxFitness</h1>
        <p>Start your fitness journey today and transform your life with personalized training and nutrition guidance.</p>
      </div>
    </section>

    <section class="features">
      <div class="container">
        <div style="max-width: 600px; margin: 0 auto; background: white; padding: 3rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
          <h2 style="text-align: center; margin-bottom: 2rem; color: #1e1e2f;">Create Your Account</h2>
          
          <form id="signupForm" style="display: flex; flex-direction: column; gap: 1.5rem;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
              <div>
                <label for="firstName" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">First Name *</label>
                <input type="text" id="firstName" name="firstName" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
              </div>
              <div>
                <label for="lastName" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Last Name *</label>
                <input type="text" id="lastName" name="lastName" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
              </div>
            </div>
            
            <div>
              <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Email Address *</label>
              <input type="email" id="email" name="email" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
            </div>
            
            <div>
              <label for="phone" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Phone Number</label>
              <input type="tel" id="phone" name="phone" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
            </div>
            
            <div>
              <label for="password" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Password *</label>
              <div style="position: relative;">
                <input type="password" id="password" name="password" required minlength="8" style="width: 100%; padding: 12px; padding-right: 50px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                <button type="button" id="togglePassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem; color: #666; padding: 0;" onclick="togglePasswordVisibility()">
                  üëÅÔ∏è
                </button>
              </div>
              <small style="color: #666; font-size: 0.9rem;">Password must be at least 8 characters long</small>
            </div>
            
            <div>
              <label for="confirmPassword" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Confirm Password *</label>
              <div style="position: relative;">
                <input type="password" id="confirmPassword" name="confirmPassword" required style="width: 100%; padding: 12px; padding-right: 50px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                <button type="button" id="toggleConfirmPassword" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem; color: #666; padding: 0;" onclick="toggleConfirmPasswordVisibility()">
                  üëÅÔ∏è
                </button>
              </div>
            </div>
            
            <div>
              <label for="fitnessGoals" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Primary Fitness Goal *</label>
              <select id="fitnessGoals" name="fitnessGoals" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                <option value="">Select your primary goal</option>
                <option value="weight-loss">Weight Loss</option>
                <option value="muscle-gain">Muscle Building</option>
                <option value="general-fitness">General Fitness</option>
                <option value="sports-performance">Sports Performance</option>
                <option value="flexibility">Flexibility & Mobility</option>
                <option value="rehabilitation">Rehabilitation</option>
              </select>
            </div>
            
            <div>
              <label for="experience" style="display: block; margin-bottom: 0.5rem; font-weight: bold; color: #333;">Fitness Experience Level *</label>
              <select id="experience" name="experience" required style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                <option value="">Select your experience level</option>
                <option value="beginner">Beginner (0-6 months)</option>
                <option value="intermediate">Intermediate (6 months - 2 years)</option>
                <option value="advanced">Advanced (2+ years)</option>
              </select>
            </div>
            
            <div style="display: flex; align-items: center; gap: 0.5rem; margin: 1rem 0;">
              <input type="checkbox" id="terms" name="terms" required style="width: auto;">
              <label for="terms" style="font-size: 0.9rem; color: #333;">
                I agree to the <a href="#" style="color: #667eea;">Terms of Service</a> and <a href="#" style="color: #667eea;">Privacy Policy</a> *
              </label>
            </div>
            
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
              <input type="checkbox" id="newsletter" name="newsletter" style="width: auto;">
              <label for="newsletter" style="font-size: 0.9rem; color: #333;">
                Subscribe to our newsletter for fitness tips and updates
              </label>
            </div>
            
            <button type="submit" class="btn-primary" style="width: 100%; padding: 15px; font-size: 1.1rem; margin-top: 1rem;">Create Account</button>
          </form>
          
          <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e9ecef;">
            <p style="color: #666;">Already have an account? <a href="loginPage.html" style="color: #667eea; font-weight: bold;">Log in here</a></p>
          </div>
        </div>
      </div>
    </section>

    <section class="cta">
      <div class="container">
        <h2>Why Sign Up?</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 2rem;">
          <div style="text-align: center;">
            <h3 style="color: #ffd700; margin-bottom: 1rem;">Personalized Plans</h3>
            <p>Get customized workout and nutrition plans tailored to your specific goals and fitness level.</p>
          </div>
          <div style="text-align: center;">
            <h3 style="color: #ffd700; margin-bottom: 1rem;">Progress Tracking</h3>
            <p>Monitor your fitness journey with detailed progress tracking and analytics.</p>
          </div>
          <div style="text-align: center;">
            <h3 style="color: #ffd700; margin-bottom: 1rem;">Expert Support</h3>
            <p>Access to certified trainers and nutrition experts for guidance and motivation.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>LinoxFitness</h3>
          <p>Transforming lives through personalized fitness and nutrition guidance.</p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="about.html">About Us</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="schedule.html">Schedule</a></li>
            <li><a href="credentials.html">Credentials</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Contact</h4>
          <p>Ready to start your journey?</p>
          <a href="loginPage.html" class="btn-outline">Get Started</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 LinoxFitness. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Firebase CDN -->
  <script type="module">
    // Import Firebase modules
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getFirestore, doc, setDoc, getDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    // Firebase configuration - using your actual config
    const firebaseConfig = {
      apiKey: "AIzaSyCIrzE92nfyWeCxqpX1KcR2c_Rs1ubviy4",
      authDomain: "linox-soccer.firebaseapp.com",
      projectId: "linox-soccer",
      storageBucket: "linox-soccer.firebasestorage.app",
      messagingSenderId: "313058607377",
      appId: "1:313058607377:web:784530fe05a04272dd4cb0",
      measurementId: "G-QQJD06D5RK"
    };
    
    console.log('‚úÖ Using Firebase configuration for linox-soccer project');

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Signup functionality
    class SignUpFirebase {
      constructor() {
        this.init();
      }

      async init() {
        await this.checkExistingSession();
        this.setupEventListeners();
      }

      async checkExistingSession() {
        return new Promise((resolve) => {
          onAuthStateChanged(auth, async (user) => {
            if (user) {
              try {
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (userDoc.exists()) {
                  const userData = userDoc.data();
                  
                  if (userData.isAdmin) {
                    window.location.href = 'admin-portal-firebase.html';
                  } else {
                    window.location.href = 'dashboard.html';
                  }
                } else {
                  window.location.href = 'dashboard.html';
                }
              } catch (error) {
                console.error('Error checking user profile:', error);
                window.location.href = 'dashboard.html';
              }
            }
            resolve();
          });
        });
      }

      setupEventListeners() {
        const signupForm = document.getElementById('signupForm');
        if (signupForm) {
          signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            this.handleSignup();
          });
        }
      }

      async handleSignup() {
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        const fitnessGoals = document.getElementById('fitnessGoals').value;
        const experience = document.getElementById('experience').value;
        const terms = document.getElementById('terms').checked;

        // Validation
        if (!firstName || !lastName || !email || !password || !confirmPassword || !fitnessGoals || !experience) {
          alert('Please fill in all required fields');
          return;
        }

        if (password !== confirmPassword) {
          alert('Passwords do not match');
          return;
        }

        if (password.length < 8) {
          alert('Password must be at least 8 characters long');
          return;
        }

        if (!terms) {
          alert('Please accept the Terms of Service');
          return;
        }

        try {
          // Create user account
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;

          // Create user profile in Firestore
          const userProfile = {
            uid: user.uid,
            firstName: firstName,
            lastName: lastName,
            email: email,
            phone: phone || '',
            fitnessGoals: fitnessGoals,
            experience: experience,
            isAdmin: false,
            createdAt: serverTimestamp(),
            lastLogin: serverTimestamp()
          };

          await setDoc(doc(db, 'users', user.uid), userProfile);

          // Also create customer profile
          const customerProfile = {
            firstName: firstName,
            lastName: lastName,
            email: email,
            phone: phone || '',
            trainingLevel: experience,
            status: 'active',
            createdAt: serverTimestamp(),
            lastActivity: 'Never',
            profilePhoto: null
          };

          await setDoc(doc(db, 'customers', user.uid), customerProfile);

          alert('Account created successfully! Welcome to LINQXFITNESS!');
          setTimeout(() => {
            window.location.href = 'dashboard.html';
          }, 1500);

        } catch (error) {
          console.error('Signup error:', error);
          let errorMessage = 'Signup failed. Please try again.';
          
          if (error.code === 'auth/email-already-in-use') {
            errorMessage = 'An account with this email already exists.';
          } else if (error.code === 'auth/weak-password') {
            errorMessage = 'Password is too weak. Please choose a stronger password.';
          } else if (error.code === 'auth/invalid-email') {
            errorMessage = 'Please enter a valid email address.';
          }
          
          alert(errorMessage);
        }
      }
    }

    // Initialize signup page when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new SignUpFirebase();
    });

    // Password toggle functions
    function togglePasswordVisibility() {
      const passwordInput = document.getElementById('password');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
      } else {
        passwordInput.type = 'password';
      }
    }

    function toggleConfirmPasswordVisibility() {
      const confirmPasswordInput = document.getElementById('confirmPassword');
      
      if (confirmPasswordInput.type === 'password') {
        confirmPasswordInput.type = 'text';
      } else {
        confirmPasswordInput.type = 'password';
      }
    }
  </script>
</body>
</html>
